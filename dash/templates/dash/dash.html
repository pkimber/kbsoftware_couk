{% extends 'dash/base.html' %}
{% load staticfiles %}
{% load nvd3_tags %}

{% block sub_heading %}
  Dashboard
{% endblock sub_heading %}

{% block stylesheets_extra %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'vendor/css/nvd3/nv.d3.css' %}">
{% endblock stylesheets_extra %}

{% block content %}
  <div class="pure-g">
    <div class="pure-u-1">
      <div class="l-box">
        Dashboard
      </div>
    </div>
  </div>
  <div class="pure-g">
    {% for r in report %}
      {% ifchanged r.user %}
        </div>
        <div class="pure-g">
          <div class="pure-u-1">
            {% if r.user %}
              <h4>{{ r.user.username }}</h4>
            {% endif %}
          </div>
        </div>
        <div class="pure-g">
      {% endifchanged r.user %}
      <div class="pure-u-1 pure-u-md-1-2">
        {{ r.caption }}
        {% include_container r.chartcontainer 300 350 %}
      </div>
    {% endfor %}
  </div>
{% endblock content %}

{% block script_extra %}
  {{ block.super }}
  <script src="{% static 'vendor/js/nvd3/d3.js' %}" type="text/javascript"></script>
  <script src="{% static 'vendor/js/nvd3/nv.d3.js' %}" type="text/javascript"></script>
  {% for r in report %}
    {% load_chart r.charttype r.chartdata r.chartcontainer r.extra %}
  {% endfor %}
{% endblock script_extra %}
